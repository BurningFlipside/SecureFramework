function login_submit_done(o){if(o.error){var i=1*getParameterByName("failed"),n=window.location;i++,o["return"]&&(n=o["return"]),window.location="https://profiles.burningflipside.com/login.php?failed="+i+"&return="+n}else o["return"]&&(window.location=o["return"])}function login_submitted(o){$.ajax({url:"https://profiles.burningflipside.com/ajax/login.php",data:$(o).serialize(),type:"post",dataType:"json",xhrFields:{withCredentials:!0},success:login_submit_done})}function login_dialog_shown(){$("[name=username]").focus()}function do_login_init(){var o=$(".links a[href*='login']");browser_supports_cors()?(o.attr("data-toggle","modal"),o.attr("data-target","#login-dialog"),o.removeAttr("href"),o.css("cursor","pointer")):o.attr("href",o.attr("href")+"?return="+document.URL),$("#login_main_form").length>0&&$("#login_main_form").validate({submitHandler:login_submitted}),$("#login_dialog_form").length>0&&$("#login_dialog_form").validate({submitHandler:login_submitted}),$("#login-dialog").length>0&&($("#login-dialog").modal({show:!1,backdrop:"static"}),$("#login-dialog").on("shown.bs.modal",login_dialog_shown))}$(do_login_init);
